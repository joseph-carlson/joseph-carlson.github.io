<!DOCTYPE html>
<html lang="en">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/style.css">

        <title>Wireguard VPN</title>
    </head>
    <body><div id="header">
    <h1 class="title">
        <a href="/">
            <p>Joseph&nbsp;</p>
            <p>Carlson</p>
        </a>
    </h1>
    <span><a href="/"><img src="/logo.ico" alt="Logo" height="75" id="logo"></a>
    </span>
    <span><h3 id="headerCategories"><a href="/case-studies/">case-studies</a>&nbsp;&nbsp;</h3><h3 id="headerCategories"><a href="/projects/">projects</a>&nbsp;&nbsp;</h3><h3 id="headerCategories"><a href="/interesting-stuff/">interesting-stuff</a>&nbsp;&nbsp;</h3></span>
</div><hr>

        <div id="narrowOnDesktop"><div class="sticky">
    <div id="breadcrumbs">
        <h3>~</h3><h3 class="breadcrumbPages">&nbsp;/&nbsp;<a href="/">Root</a></h3><h3 class="breadcrumbPages">&nbsp;/&nbsp;<a href="/projects/">Projects</a></h3><h3 class="breadcrumbPages">&nbsp;/&nbsp;<a href="/projects/homelab/">Home Lab</a></h3><h3 class="breadcrumbPages">&nbsp;/&nbsp;<a href="/projects/homelab/wireguard-vpn/">Wireguard VPN</a></h3></div>
    <hr>
</div><div id="postBanner"><br>
    Page content loading...&nbsp;<a href="/tags/all/">#all&nbsp;</a><a href="/tags/homelab/">#homelab&nbsp;</a><h3 id="stage-2-remote-access">Stage 2: Remote Access</h3>
<p>WireGuard is what makes it possible to visit to a nice coffee shop, order a latte and pastry, open my laptop, and pick up where I left off (without exposing my network to the internet).</p>
<p>At the time of writing this, I am running OPNsense version 25.7.2.</p>
<p>First, I created a WireGuard instance, which defines the local tunnel address, port, and private/public key pair. Once created and enabled, this instance will listen for incoming traffic on the WAN IP through the designated port.</p>
<div class="standardPadding" style="text-align: center; max-width: 100%; height: auto;"> 
  
    <h3 class="caption">WireGuard Instance:</h3> 
  <div style="max-width: 1000px;">
    <img
      src="/projects/home-lab/wireguard/wireguard-instance.png" 
      alt="WireGuard Instance"
      loading="lazy"
      style="display: block; max-width: 100%; max-height: 80vh; width: auto; height: auto; margin-left: auto; margin-right: auto;"> 
      
    </div>
</div>
<p>Second, I enabled the WireGuard interface so I can configure the necessary firewall rules.</p>
<div class="standardPadding" style="text-align: center; max-width: 100%; height: auto;"> 
  
    <h3 class="caption">WireGuard Interface:</h3> 
  <div style="max-width: 1000px;">
    <img
      src="/projects/home-lab/wireguard/wireguard-interface.png" 
      alt="WireGuard Interface"
      loading="lazy"
      style="display: block; max-width: 100%; max-height: 80vh; width: auto; height: auto; margin-left: auto; margin-right: auto;"> 
      
    </div>
</div>
<p>Third, the firewall rules must be configured. Traffic from the internet must pass through the WAN firewall into the local network on port 51820 for WireGuard traffic. Then the WireGuard interface must allow traffic to local resources and the internet. &ldquo;PrivateNetworks&rdquo; is an alias I defined by he Private IPv4 Ranges established in RFC 1918.</p>
<div class="standardPadding" style="text-align: center; max-width: 100%; height: auto;"> 
  
    <h3 class="caption">WAN Firewall Rules:</h3> 
  <div style="max-width: 1000px;">
    <img
      src="/projects/home-lab/wireguard/wan-fw-rule.png" 
      alt="WAN Firewall Rules"
      loading="lazy"
      style="display: block; max-width: 100%; max-height: 80vh; width: auto; height: auto; margin-left: auto; margin-right: auto;"> 
      
    </div>
</div>
<div class="standardPadding" style="text-align: center; max-width: 100%; height: auto;"> 
  
    <h3 class="caption">WG Firewall Rules:</h3> 
  <div style="max-width: 1000px;">
    <img
      src="/projects/home-lab/wireguard/wireguard-fw-rule.png" 
      alt="WG Firewall Rules"
      loading="lazy"
      style="display: block; max-width: 100%; max-height: 80vh; width: auto; height: auto; margin-left: auto; margin-right: auto;"> 
      
    </div>
</div>
<p>Lastly, I used the Peer Generator to add both my MacBook and iPhone as peers on the WireGuard instance.</p>
<div class="standardPadding" style="text-align: center; max-width: 100%; height: auto;"> 
  
    <h3 class="caption">Mac Peer:</h3> 
  <div style="max-width: 1000px;">
    <img
      src="/projects/home-lab/wireguard/mac-peer.png" 
      alt="Mac Peer"
      loading="lazy"
      style="display: block; max-width: 100%; max-height: 80vh; width: auto; height: auto; margin-left: auto; margin-right: auto;"> 
      
    </div>
</div>
<div class="standardPadding" style="text-align: center; max-width: 100%; height: auto;"> 
  
    <h3 class="caption">IOS Peer:</h3> 
  <div style="max-width: 1000px;">
    <img
      src="/projects/home-lab/wireguard/ios-peer.png" 
      alt="IOS Peer"
      loading="lazy"
      style="display: block; max-width: 100%; max-height: 80vh; width: auto; height: auto; margin-left: auto; margin-right: auto;"> 
      
    </div>
</div>
<br><br><hr>
<div id="footer">
    <p>@2025&nbsp;&nbsp;</p>
    
    <p><a href="mailto:jwcarlson.tech@gmail.com">jwcarlson.tech@gmail.com</a>&nbsp;</p>
    
    <span id="footerLinks">
        <p><a href="https://www.linkedin.com/in/joseph-carlson-it/" target='_blank'>LinkedIn</a>&nbsp;&nbsp;</p><p><a href="/documents/resume.pdf" target="_blank">Resume</a>&nbsp;&nbsp;</p></span>
</div></div>
        </div>
    </body>
</html>

